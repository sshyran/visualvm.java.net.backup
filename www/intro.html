<html>
    <head>
        <title>Introduction to VisualVM</title>
        <link rel="stylesheet" type="text/css" href="default.css">
    </head>
    <body>
        <h2>VisualVM Overview</h2>
        <p>VisualVM is a tool that provides detailed information about Java applications while they are running. 
        VisualVM provides an intuitive visual interface for viewing data about multiple Java applications running on the Java Virtual Machine (JVM).
        </p>
        <!--
<h3>Starting VisualVM</h3>

The VisualVM executable can be found in JDK_HOME/bin, where JDK_HOME is the directory in which the Java Development Kit (JDK) is installed. 
If this directory is in your system path, you can start JConsole by simply typing visualvm in a command (shell) prompt. 
Otherwise, you have to type the full path to the executable file.

Command Syntax



Note - Using JConsole to monitor a local application is useful for development and for creating prototypes, 
but is not recommended for production environments, because JConsole itself consumes significant system resources. 
Remote monitoring is recommended to isolate the JConsole application from the platform being monitored.

For a complete reference on the syntax of the visualvm command, see the manual page for the visualvm command: 
Java Monitoring and Management Console.


Setting up Local Monitoring

You start JConsole by typing the following command at the command line.

% jconsole

When JConsole starts, you will be given a choice of all the Java applications that are running locally that JConsole can connect to.

If you want to monitor a specific application, and you know that application's process ID, then you can also start JConsole so that it connects to that application. This application must be running with the same user ID as JConsole. The command syntax to start JConsole for local monitoring of a specific application is the following.

% jconsole processID

In the command above processID is the application's process ID (PID). You can determine an application's PID in the following ways:

    *

      On UNIX or Linux systems, you can use the ps command to find the PID of the java instance that is running.
    *

      On Windows systems, you can use the Task Manager to find the PID of java or javaw.
    *

      You can also use the jps command-line utility to determine PIDs. See the manual page for the Java Virtual Machine Process Status Tool.

For example, if you determined that the process ID of the Notepad application is 2956, then you would start JConsole with the following command.

% jconsole 2956     
        

-->
        
        <h3>VisualVM Windows</h3>
        <p>The VisualVM window is divided into two windows.
        </p>
        
        
        
        <h4>Applications Window</h4>
        <p>The <a href="applications_window.html">Applications window</a> opens in the left of the VisualVM when you launch the application.
        The Applications window is the main point of entry for exploring the details of running applications.
        The Applications window enables you to quickly view the applications running on the local machine and any connected remote machines.
        You can also access core dumps (Solaris only) and saved snapshots from the Applications window.</p>
        <p>The Applications window organizes information under the following nodes.</p>
        <ul>
            <li>Local</li>
        </ul>
        
        
        <p>Right-clicking a node in the Applications window opens a popup menu that enables perform actions related to that node, including
        opening application tabs, taking heap and thread dumps and opening snapshots in the main window.</p>
        
          

        <h4>Main Window</h4>
        <p>Detailed information about applications is displayed in the main window.
        When you view data about an application, each application is represented by a tab in the main window 
        that enables you to easily view and navigate the data.
        Saved thread or heap dump are also opened in the main window.
        </p>
        <p>When you open an application tab in VisualVM, each application tab has the following tabs</p>
        <ul>
            <li><a href="overview_tab.html">Overview Tab</a> This tab displays high-level information about the application.</li>
            <li><a href="monitor_tab.html">Monitor Tab</a> This tab contains graphs displaying monitoring data about the application.</li>
            <li><a href="thread.html">Threads Tab</a></li>
            <li><a href="profiler.html">Profile Tab</a></li>
        </ul>
            
       <img src="images/docs/full-view.png" style="border:1px solid;" alt="screenshot of VisualVM window" 
        title="screenshot of VisualVM window" />
        
        

      <!--  <img src="images/overview.png"/><br>
        <b>Figure 3: Application Tab</b>
        <p>Each application tab has one or more displays that provide information
        about the selected Java application.</p>
        <h4>Overview</h4>
        <p>The Overview display shows high-level information about the application:
        its process ID, Java version used to run it, the name of the main class, etc.</p>
        <h4>Monitor</h4>
        <p>The Monitor display provides radio buttons so that you can select from 
            four different graphs: Heap, Permanent Generation, Threads, and Classes.  Figure
            4 shows the heap graph.  Total heap space is in red and the actual amount
        of heap in use is shown in purple.</p>
        <img src="images/monitor.png"/><br>
        <b>Figure 4: Monitor Display</b>
        <h4>Profiler</h4>
        <p>The Profiler display (Figure 5) provides a user interface for tracking thread
            state, CPU bottlenecks, and memory usage patterns and problems.  It uses 
            dynamic instrumentation of the Java application in order to provide this
        information, so it introduces some overhead. </p>
        <img src="images/profiling.png"/><br>
        <b>Figure 5: Profiler Display</b>
        
        <a name="remote_applications"></a>
        <h3>Remote Applications</h3>
        <p>VisualVM can display information about Java applications that are running
            on other systems.  To add another system, right-click the Remote entry
            in the Applications window and then fill in the dialog that is shown in 
            Figure 6. Note that the jstatd utility must be running on the remote
            system - more information about jstatd is available 
            <a href="http://java.sun.com/javase/6/docs/tooldocs/share/jstatd.html">
        here</a>.</p>
        <img src="images/remote.png"/><br>
        <b>Figure 6: Add Remote Host</b>
        
        <a name="heap_dumps"></a>
        <h3>Heap Dump Files</h3>
        <p>The VisualVM application can also read binay heap dump files that have 
            been written by a Java Virtual Machine.  Note that it is not necessary to
            open any Java applications in order to use this feature.  Just choose
            Profile &gt; Load Heap Dump from the main menu of VisualVM.  Select 
            a binary heap dump file and VisualVM will display detailed information
        about that heap dump in its HeapWalker, as shown in Figure 7.</p>
        <img src="images/hw.png"/><br>
        <b>Figure 7: HeapWalker</b>
        <p>The HeapWalker is useful for tracking down memory leaks - its Instances
            view shows all object instances for a class.  You can right-click an object
            in the References section and choose Find Nearest GC Root, as shown in 
            Figure 8.  This will cause the HeapWalker to search for and then display
            the nearest garbage collection root object.
        </p>
        <img src="images/gc.png"/><br>
        <b>Figure 8: Find Nearest GC Root</b>
        <h3>Collecting Thread and Heap Dumps</h3>
        <p>As shown in the context menu in Figure 2, VisualVM can collect data from an application
            as it is running.  Select Thread Dump from the context menu to create an ASCII file that contains
            stack traces for each thread currently running in the application.  Select
        Heap Dump from the context menu to create a binary heap dump file.</p>
        <p>You can also enable and disable a flag that indicates to the JVM
            whether or not it should write a heap dump in the event of an
            OutOfMemoryError (OOME).</p>
        
        <a name="mbean_browser"></a>
        <h3>MBean Browser VisualVM Plugin</h3>
        <p>The MBean Browser is a new VisualVM plugin available in the VisualVM
        Plugin Center which provides the same functionality as the
        <a href="http://java.sun.com/javase/6/docs/technotes/guides/management/jconsole.html#gdeap">JConsole's MBeans tab</a>.
        In order to install it just choose Tools &gt; Plugins from the main menu
        of VisualVM, select the VisualVM-MBeans plugin and click on the Install
        button.</p>
        <img src="images/mbean_browser_uc.png"/><br>
        <b>Figure 9: MBean Browser plugin in the VisualVM Plugin Center</b>
        <p>The MBean Browser plugin allows to browse the MBeans registered in the
        out-of-the-box management agent's platform MBean server both in local and
        remote Java applications. It also allows to get and set MBean attributes
        and invoke MBean operations as well as subscribing for MBean notifications.</p>
        <img src="images/mbean_browser.png"/><br>
        <b>Figure 10: MBean Browser displays the attributes of the ClassLoading
        MXBean in the local Notepad application</b>
        <p>The MBean Browser will be enabled - by right-clicking in a given local
        or remote application and choosing the Open item in the contextual menu - whenever JMX
        is enabled in the target VM. See <a href="#jmx">Enabling JMX access in the target VM</a>
        for more detailed information.</p>

        <a name="jconsole_plugins"></a>
        <h3>JConsole Plugins Wrapper VisualVM Plugin</h3>
        <p>This plugin wraps custom JConsole plugins and integrates them into VisualVM.
        The aim of this plugin is to serve as a smooth migration path for JConsole plugin
        developers. The custom JConsole plugins supplied using the jconsole.plugin.path
        system property will be loaded into the VisualVM tool.</p>
        <p><b>Usage:</b></p>
        <p style="color: blue">$ visualvm [-J-Djconsole.plugin.path=&lt;plugin-path&gt;]</p>
        <ul>
            <li>where &lt;plugin-path&gt; specifies the paths to the jar files of the JConsole plugins
            to look up. Multiple paths are separated by the path separator character of the platform.</li>
        </ul>
        <p>This plugin is available in the VisualVM Plugin Center. In order to install
        it just choose Tools &gt; Plugins from the main menu of VisualVM, select the
        VisualVM-JConsole plugin and click on the Install button.</p>
        <img src="images/jconsole_plugins_uc.png"/><br>
        <b>Figure 11: JConsole plugins in the VisualVM Plugin Center</b>
        <p>The picture below shows an example of VisualVM running the JTop JConsole plugin
        supplied with the JDK under &lt;jdk-home&gt;/demo/management/JTop/JTop.jar</p>
        <img src="images/jconsole_plugins_jtop.png"/><br>
        <b>Figure 12: JTop JConsole plugin running inside VisualVM.</b>
        <p>The support for custom JConsole plugins in VisualVM will be enabled
        - by right-clicking in a given local or remote application and choosing
        the Open item in the contextual menu - whenever JMX is enabled in the
        target VM. See <a href="#jmx">Enabling JMX access in the target VM</a>
        for more detailed information.</p>

        <a name="jmx"></a>
        <h3>Enabling JMX access in the target VM</h3>
        <p>The JMX access will be enabled in the target VM in the following cases:</p>
            <ul>
                <li>local process:</li>
                <ul>
                    <li>the local Java application is running on JDK 6 or higher
                    (no special management system property needed)</li>
                    <li>the local Java application is running on JDK 5 and has been
                    started with the <b>-Dcom.sun.management.jmxremote</b> system property, e.g.<br>
                <pre>$ java -Dcom.sun.management.jmxremote MyApp</pre></li>
                </ul>
                <li>remote process:</li>
                <ul>
                    <li>the remote Java application is running on JDK 5 or higher
                    and has been started with a specific port for remote management
                    and security has been disabled (both authentication and encryption), e.g.<br>
                    <pre>$ java -Dcom.sun.management.jmxremote.port=&lt;port&gt; -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false MyApp</pre></li>
                </ul>
            </ul>
-->
        <!--a name="feature_matrix"></a>
        <h3>JDK Dependent Feature Matrix</h3>
        <p>The VisualVM features that are available depend on the JDK version that
            is used to run your application.  All features are available if your application
            is running on JDK 6 or higher, but only a subset is available if your application
            is running on JDK 1.4.2 or JDK 5.  The table below shows the available features.
        </p>
        <table border=1>
            <tr><td><b>Feature</b></td><td style="text-align:center;" width="15%"><b>1.4.2 <small>local/remote</small></b></td><td style="text-align:center;" width="15%"><b>5 <small>local/remote</small></b></td><td style="text-align:center;" width="15%"><b>6 <small>local</small></b></td><td style="text-align:center;" width="15%"><b>6 <small>remote</small></b></td></tr>
            <tr><td>Overview</td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td></tr>
            <tr><td>System Properties (in Overview)</td><td style="text-align:center;">&nbsp</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td>&nbsp</td></tr>
            <tr><td>Monitor</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td></tr>
            <tr><td>Profiler</td><td>&nbsp</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td>&nbsp</td></tr>
            <tr><td>Thread Dump</td><td>&nbsp</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td>&nbsp</td></tr>
            <tr><td>Heap Dump</td><td>&nbsp</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td>&nbsp</td></tr>
            <tr><td>Enable Heap Dump on OOME</td><td>&nbsp</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td>&nbsp</td></tr>
            <tr><td>MBean Browser</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td></tr>
            <tr><td>JConsole plugins</td><td>&nbsp</td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td><td style="text-align:center;"><img src="images/check.png"/></td></tr>
        </table-->
        
    </body>
</html>
