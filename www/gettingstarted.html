<html>
    <head>
        <title>Getting Started with VisualVM</title>
        <link rel="stylesheet" type="text/css" href="default.css">
    </head>
    <body>
        <h1>Getting Started with VisualVM</h1>
        <hr>
        <p>VisualVM provides detailed information about Java applications while they are running on the Java Virutal Machine (JVM). 
        VisualVM's graphical user interface enables you to quickly and easily see information about multiple Java applications.</p>
        
        <p>This getting started guide should help you quickly get up and running with the VisualVM.
        This guide will demonstrate how to install VisualVM and add functionality to the tool by installing a plugin from the VisualVM update center.
        This guide will show you how to launch VisualVM and view some of the information you can get about an application running on the local JVM and a remote JVM.</p>
        
        <h3>Installing VisualVM</h3>
        <ol>
            <li>Download and unzip the VisualVM installer.</li>
            <li>Navigate to the <tt>bin</tt> directory of the VisualVM installation directory and launch the application.</li>
        </ol>    

        <p>The main window of VisualVM opens when you launch the application.
        By default, the Applications window is displayed in the left pane of the main window.
        The Applications window enables you to quickly see the Java applications running on the local and remote JVMs.</p>
        <img src="images/getstarted/vvm-anagram-applications.png" style="border:1px solid;" alt="screenshot of profier tab with profiling results" 
        title="Screenshot showing the profiling results when analyzing memory allocation">


        <h3>Profiling an Application</h3>
        <p>VisualVM includes a profiler that enables you to profile applications running on your local JVM.
        You access the profiling controls in the Profiler tab of the application.
        The profiler enables you to analyze memory usage and CPU performance of local applications.<br/>
        <b>Note.</b> To profile an application running on JDK 6, you need to turn off class sharing for the application otherwise the application may crash.
        To turn off class sharing, start the application with <tt>-Xshare:off</tt> argument.</p>
        
        <ol>
            <li>Launch a local Java application. (Start the application with the <tt>-Xshare:off</tt> argument.)</li>
            <li>Under the Locals node in the Applications window, right-click the application node and choose Open to open the application tab.</li>
            <li>Click the Profiler tab in the application tab.</li>
            <li>Click Memory or CPU in the the Profiler tab.
            <p>When you click Memory, VisualVM instruments the application and displays the profiling data in the Profiler tab.</p>
            <img src="images/getstarted/vvm-anagram-profiler.png" style="border:1px solid;" alt="screenshot of profier tab with profiling results" 
            title="Screenshot showing the profiling results when analyzing memory allocation">
            </li>
        </ol>


        <h3>Browsing a Heap Dump</h3>
        <p>VisualVM enables you to easily take and save a snapshots of the heap to capture data about local applications.
        You can use the VisualVM heap browser to view and explore the heap snapshot.
        You can also load and browsed saved heap dumps.</p>
        <ol>
            <li>Right-click an application's node in the Applications window and choose Open.</li>
            <li>Click the Monitor tab in the application tab.</li>
            <li>Click Heap Dump in the Monitor tab.
            <p>When you click Heap Dump, VisualVM opens the heap dump in a new tab.
            VisualVM also adds a node for the heap dump below the application's node in the Applications window.</p></li>
            <li>Click Classes in the Heap Dump toolbar and double-click a class name to open the Instances view for the class.</li>
            <li>Save the heap dump to your local system by right-clicking the Heap Dump node in the Applications window and choosing Save As.
            When you take a heap dump with VisualVM, the heap dump is saved in a temporary directory 
            and will be deleted when you close the application unless you save it.</li>
        </ol>


        <!--Application heap dumps and thread dumps are displayed below the application node.--></p>
        <!--<h3>Opening Application Tabs</h3>
        <p>
        To view data about a specific local application:</p>
        <ol>
            <li>Right-click the application node in the Applications window and choose Open.
            <p>When you click Open, the tab for the application opens in the main window.
            Overview</p></li>
            <li>Click</li>
        </ol>
-->

        
        
        
<!--<p>When the application tab opens, the Overview tab is displayed by default.
        The Overview tab displays general information about the application.</p>
        <b>image of anagram application tab - overview</b>-->

      
        <h3>Installing VisualVM Plugins</h3>
        <p>You can add functionality to VisualVM by installing plugins available from the VisualVM update center.
        For example, installing the VisualVM-MBeans plugin adds an MBeans tab to the application tab 
        that enables you to <a href="http://java.sun.com/javase/6/docs/technotes/guides/management/jconsole.html#gdeap">monitor and manage MBeans</a> 
        from within VisualVM.</p>
        <p><b>To install a VisualVM plugin:</b></p>
        <ol>
            <li>Choose Tools &gt; Plugins from the main menu.</li>
            <li>In the Available Plugins tab, select the Install checkbox for the plugin. Click Install.</li>
            <li>Step through and complete the plugin installer.<br/>
        <img src="images/getstarted/vvm-plugins-window.png">
        <p class="small">Screenshot of Plugin manager with the VisualVM-MBeans plugin selected.</p></li>
        </ol>
      
        
        
        
            <h2>Connecting to a Remote Host</h2>
            <p>VisualVM enables you to easily monitor applications running on remote hosts and view general data about
            the remote system. You cannot profile applications running on a remote host.</p>
            You can also add remote hosts to view details about applications running on remote JVMs.
        Remote applications are listed below the Remote node in the Applications window.
            <p>To retrieve data from a remote application, the <tt>jstatd</tt> utility needs to be running on the remote JVM.
                For more information on how to start <tt>jstatd</tt>, see <a href="http://java.sun.com/javase/6/docs/technotes/tools/share/jstatd.html">jstatd - Virtual Machine jstat Daemon</a>
            </p>

            <ol>
                <li>Right-click Remote in the Applications window and choose Add Remote Host.</li>
                <li>In the Add Remote Host dialog box, type the host name or IP address of the remote machine.</li>
                <li>(Optional) Type a display name for the remote host. This name is displayed in the Applications window.
                If no display name is entered, the host name is used to identify the remote host in the Applications window.</li>
                <li>Click OK.</li>
            </ol>
            <p>When you click OK, a node for the remote host appears under the Remote node. 
            Expand the remote host node to see the Java applications that are running on the remote host.</p>
            <p>You can double-click on the name of the remote applications to open the application tab in VisualVM.</p>

        

<!--
        <h4>Overview</h4>
        <p>The Overview display shows high-level information about the application:
        its process ID, Java version used to run it, the name of the main class, etc.</p>
        <h4>Monitor</h4>
        <p>The Monitor display provides radio buttons so that you can select from 
            four different graphs: Heap, Permanent Generation, Threads, and Classes.  Figure
            4 shows the heap graph.  Total heap space is in red and the actual amount
        of heap in use is shown in purple.</p>
        <img src="images/monitor.png"/><br>
        <b>Figure 4: Monitor Display</b>
        <h4>Profiler</h4>
        <p>The Profiler display (Figure 5) provides a user interface for tracking thread
            state, CPU bottlenecks, and memory usage patterns and problems.  It uses 
            dynamic instrumentation of the Java application in order to provide this
        information, so it introduces some overhead. </p>
        <img src="images/profiling.png"/><br>
        <b>Figure 5: Profiler Display</b>
    -->    

<!--        
        <a name="heap_dumps"></a>
        <h3>Heap Dump Files</h3>
        <p>The VisualVM application can also read binay heap dump files that have 
            been written by a Java Virtual Machine.  Note that it is not necessary to
            open any Java applications in order to use this feature.  Just choose
            Profile &gt; Load Heap Dump from the main menu of VisualVM.  Select 
            a binary heap dump file and VisualVM will display detailed information
        about that heap dump in its HeapWalker, as shown in Figure 7.</p>
        <img src="images/hw.png"/><br>
        <b>Figure 7: HeapWalker</b>
        <p>The HeapWalker is useful for tracking down memory leaks - its Instances
            view shows all object instances for a class.  You can right-click an object
            in the References section and choose Find Nearest GC Root, as shown in 
            Figure 8.  This will cause the HeapWalker to search for and then display
            the nearest garbage collection root object.
        </p>
        <img src="images/gc.png"/><br>
        <b>Figure 8: Find Nearest GC Root</b>
        <h3>Collecting Thread and Heap Dumps</h3>
        <p>As shown in the context menu in Figure 2, VisualVM can collect data from an application
            as it is running.  Select Thread Dump from the context menu to create an ASCII file that contains
            stack traces for each thread currently running in the application.  Select
        Heap Dump from the context menu to create a binary heap dump file.</p>
        <p>You can also enable and disable a flag that indicates to the JVM
            whether or not it should write a heap dump in the event of an
            OutOfMemoryError (OOME).</p>
        
        <a name="mbean_browser"></a>
        <h3>MBean Browser VisualVM Plugin</h3>
        <p>The MBean Browser is a new VisualVM plugin available in the VisualVM
        Plugin Center which provides the same functionality as the
        <a href="http://java.sun.com/javase/6/docs/technotes/guides/management/jconsole.html#gdeap">JConsole's MBeans tab</a>.
        In order to install it just choose Tools &gt; Plugins from the main menu
        of VisualVM, select the VisualVM-MBeans plugin and click on the Install
        button.</p>
        <img src="images/mbean_browser_uc.png"/><br>
        <b>Figure 9: MBean Browser plugin in the VisualVM Plugin Center</b>
        <p>The MBean Browser plugin allows to browse the MBeans registered in the
        out-of-the-box management agent's platform MBean server both in local and
        remote Java applications. It also allows to get and set MBean attributes
        and invoke MBean operations as well as subscribing for MBean notifications.</p>
        <img src="images/mbean_browser.png"/><br>
        <b>Figure 10: MBean Browser displays the attributes of the ClassLoading
        MXBean in the local Notepad application</b>
        <p>The MBean Browser will be enabled - by right-clicking in a given local
        or remote application and choosing the Open item in the contextual menu - whenever JMX
        is enabled in the target VM. See <a href="#jmx">Enabling JMX access in the target VM</a>
        for more detailed information.</p>

        <a name="jmx"></a>
        <h3>Enabling JMX access in the target VM</h3>
        <p>The JMX access will be enabled in the target VM in the following cases:</p>
            <ul>
                <li>local process:</li>
                <ul>
                    <li>the local Java application is running on JDK 6 or higher
                    (no special management system property needed)</li>
                    <li>the local Java application is running on JDK 5 and has been
                    started with the <b>-Dcom.sun.management.jmxremote</b> system property, e.g.<br>
                <pre>$ java -Dcom.sun.management.jmxremote MyApp</pre></li>
                </ul>
                <li>remote process:</li>
                <ul>
                    <li>the remote Java application is running on JDK 5 or higher
                    and has been started with a specific port for remote management
                    and security has been disabled (both authentication and encryption), e.g.<br>
                    <pre>$ java -Dcom.sun.management.jmxremote.port=&lt;port&gt; -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false MyApp</pre></li>
                </ul>
            </ul>
        -->
        
    </body>
</html>
