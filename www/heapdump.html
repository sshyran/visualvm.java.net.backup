<html>
    <head>
        <title>Browsing a Heap Dump</title>
        <link rel="stylesheet" type="text/css" href="default.css" />
    </head>
    <body>
        <h1>Browsing a Heap Dump</h1>
        <hr />
        <p>You can use VisualVM to browse the contents of a heap dump file and quickly see the allocated objects in the heap.
        Heap dumps are displayed in the heap dump tab in the main window.
        You can open binary format heap dump files (<tt>.hprof</tt>) saved on your local system 
        or use VisualVM to take heap dumps of running applications.</p>
        
        <p>A heap dump is a snapshot of all the objects in the JVM heap at a certain point in time.
        The JVM allocates memory for objects from the heap for all class instances and arrays. 
        The garbage collector reclaims the heap memory when an object is no longer needed and there are no references to the object.
        By examining the heap you can locate where objects are created and find the references to those objects in the source.
        If the JVM is failing to removed unneeded objects from the heap, VisualVM can help you locate the nearest garbage collecting root for the object.</p>
         
        <h4>Opening a Heap Dump File</h4>
        <p>If you have a heap dump file saved on your local system, you can choose open the file in VisualVM by choosing File &gt; Load from the main menu.
        VisualVM can open heap dumps saved in the <tt>.hprof</tt> file format.
        When you open a saved heap dump, the heap dump opens as a tab in the main window.</p>
        
        <h4>Taking a Heap Dump</h4>
        <p>You can use VisualVM to take a heap dump of a local running application.
        VisualVM takes uses the jhat tool included with the JDK to take heap dumps of applications running on the JVM.
        
        When you use VisualVM to take a heap dump, the file is only temporary until you explicitly save it.
        If you do not save the file, the file will be deleted when the application closes.</p>
        
        <p>You can take a heap dump by doing either of the following:</p>
        <ul>
            <li>Right-click the application in the Applications window and choose Heap Dump.</li>
            <li>Click Heap Dump in the Monitor tab of the application.</li>
        </ul>
        
        <p>Heap dumps for a local application open as tabs in the application's tab.
        The heap dump also appears as a time-stamped heap dump node under the application node in the Applications window.
        To save a heap dump, right-click the heap dump in the Applications window and choose Save As.</p>
        
        
        <h3>Browsing a Heap Dump</h3>
        <p>VisualVM enables you to visually browse heap dumps in the following views:</p>
        
        <h4>Summary View</h4>
        <p>When you open a heap dump, VisualVM displays the Summary view by default.
        The Summary view displays the running environment where the heap dump was taken and other system properties.</p>
        <img src="images/docs/heapdump-summary-screen.png" style="border:1px solid;" alt="screenshot of Summary view of heap dump" 
        title="screenshot of Summary view of heap dump" />
        
        <h4>Classes View</h4>
        <p>The Classes view displays a list of classes and the number and percentage of instances referenced by that class.
        You can view a list of the instances of a specific class by right-clicking the name and choosing Show in Instances View.</p>
        
        <p>You can sort how results are displayed by clicking a column heading.
        You can use the filter below the list to filter the classes by name or limit the displayed results 
        to sub-classes of a class by right-clicking a class name and choosing Show Only Subclasses.</p>
        <img src="images/docs/heapdump-classes-screen.png" style="border:1px solid;" alt="screenshot of Classes view of heap dump" 
        title="screenshot of Classes view of heap dump" />


        <h4>Instances View</h4>
        <p>The Instance view displays object instances for a selected class.
        When you select an instance from the Instance pane, VisualVM displays the fields of that class and references to that class
        in the respective panes.
        In the References pane, you can right-click an item and choose Show Nearest GC Root to display the 
        nearest garbage collection root object.</p>
        
        <img src="images/docs/heapdump-instances-screen.png" style="border:1px solid;" alt="screenshot of Instances view of heap dump" 
        title="screenshot of Instances view of heap dump" />
        
<!--        
        <b>Figure 8: Find Nearest GC Root</b>
        <h3>Collecting Thread and Heap Dumps</h3>
        <p>As shown in the context menu in Figure 2, VisualVM can collect data from an application
            as it is running.  Select Thread Dump from the context menu to create an ASCII file that contains
            stack traces for each thread currently running in the application.  Select
        Heap Dump from the context menu to create a binary heap dump file.</p>
        <p>You can also enable and disable a flag that indicates to the JVM
            whether or not it should write a heap dump in the event of an
            OutOfMemoryError (OOME).</p>
        


        -->
        
    </body>
</html>
